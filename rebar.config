{erl_opts, [
   native, {hipe, [o3]},
   {parse_transform, lager_transform}
]}.

{lib_dirs, []}.
{cover_enabled, true}.

{deps, [
   {lager, ".*",
      {git, "https://github.com/basho/lager", {branch, master}}
   }

  ,{datum,  ".*",
      {git, "https://github.com/fogfish/datum", {branch, master}}
   }

  ,{pipe,  ".*",
      {git, "https://github.com/kfsm/pipe", {branch, master}}
   }

  ,{pts,  ".*",
      {git, "https://github.com/fogfish/pts", {branch, master}}
   }

  ,{ek,  ".*",
      {git, "https://github.com/fogfish/ek", {branch, master}}
   }

  ,{knet, ".*",
      {git, "https://github.com/kfsm/knet", {branch, 'release-2'}}
   }

  ,{restd, ".*",
      {git, "https://github.com/kfsm/restd", {branch, master}}
   }

  ,{permit, ".*",
      {git, "https://github.com/fogfish/permit", {branch, master}}
   }

  ,{erlcloud, ".*",
      {git, "https://github.com/erlcloud/erlcloud", {branch, master}}
   }

  ,{swirl, ".*",
      {git, "https://github.com/fogfish/swirl", {branch, master}}
   }
]}.


{overrides, [
   %%
   %% expand compiler options
   {add, datum,  [{erl_opts, [native, {hipe, [o3]}]}]},
   {add, jsx,    [{erl_opts, [native, {hipe, [o3]}]}]},
   {add, knet,   [{erl_opts, [native, {hipe, [o3]}]}]},
   {add, lager,  [{erl_opts, [native, {hipe, [o3]}]}]},
   {add, pipe,   [{erl_opts, [native, {hipe, [o3]}]}]},
   {add, restd,  [{erl_opts, [native, {hipe, [o3]}]}]}
]}.

