<!DOCTYPE html>
<meta charset="utf-8">
<link href="/css/dress-code.min.css" rel="stylesheet">
<link href="/css/oauth2.css" rel="stylesheet">

<body class="dc-body">
<div class="dc-page">
<div class="dc-container dc-container-limited">

   <div class="dc-dialog">
      <form class="form-group" action="/oauth2/authorize" method="post">
         <div class="dc-dialog__content">
         <div class="dc-dialog__body">
            <h3 class="dc-dialog__title">Sign In</h3>
            <h4 class="dc-dialog__subtitle">with</h4>
            {if error}
               <div class="dc-toast dc-toast--top">
                  <div class="dc-toast__content dc-toast__content--error">{error}</div>
               </div>
            {else}
               <p>&nbsp;</p>
            {/if}

            <div class="form">
               <label class="dc-label" for="requiredInput">
                  Email
                  <span class="dc-label__sub">required</span>
               </label>
               <input id="access" name="access" type="email" class="dc-input" autofocus="true" required="required" />
               <label class="dc-label" for="requiredInput">
                  Password
                  <span class="dc-label__sub">required</span>
               </label>
               <input id="secret" name="secret" type="password" class="dc-input" required="required" />

               <input class="response_type" name="response_type" type="hidden" value=""/>
               <input class="client_id" name="client_id" type="hidden" value=""/>
               <input class="state" name="state" type="hidden" value=""/>
            </div>
         </div>
         </div>
         <div class="dc-dialog__actions">
            <!-- <a class="dc-btn dc-btn--link" href="">Forget Password</a> -->
            <button id="login_button" type="submit" class="dc-btn dc-btn--primary">Sign In</button>
         </div>
         <div class="dc-dialog__actions dc-dialog__actions--secondary">
            <a class="dc-btn dc-btn--small dc-btn--link" href="">Create new Account</a>
         </div>
      </form>
   </div>

</div>
</div>

<script type="text/javascript" src="/js/oauth2.js"></script>
<script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
var req = {
   response_type: oauth2.q('response_type', 'token'),
   client_id: oauth2.q('client_id', 'oauth2ux'),
   state: oauth2.q('state', '')
}

$('.response_type').val(req.response_type)
$('.client_id').val(req.client_id)
$('.state').val(req.state)

var signup = '/widget/signup.html?' + $.param(req) 
$('.dc-dialog__actions--secondary a').attr('href', signup)
</script>
</body>
