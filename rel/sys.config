[

%%
%% logger config
{lager, [
   {handlers, [
      {lager_console_backend, [{level, info}]}
   ]}
]},

%%
%%
{permit, [
   %%
   %% RFC 7519  
   %%   4.1.1.  "iss" (Issuer) Claim
   {issuer, {env, "OAUTH2_ISSUER", "http://localhost:8080"}}

   %%
   %% RFC 7519
   %%   4.1.3.  "aud" (Audience) Claim
  ,{audience, {env, "OAUTH2_AUDIENCE", "any"}}

   %%
   %% secret key to sign the token
   %% (consider usage of aws kms or cdrt with cluster distribution)
  ,{public, {env, "OAUTH2_PUBLIC", "data:LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlHZk1BMEdDU3FHU0liM0RRRUJBUVVBQTRHTkFEQ0JpUUtCZ1FEZGxhdFJqUmpvZ28zV29qZ0dIRkhZTHVnZFVXQVk5aVIzZnk0YXJXTkExS29TOGtWdzMzY0ppYlhyOGJ2d1VBVXBhckN3bHZkYkg2ZHZFT2ZvdTAvZ0NGUXNIVWZRclNEditNdVNVTUFlOGp6S0U0cVcraksreFFVOWEwM0dVbktIa2tsZStRMHBYL2c2alhaN3IxL3hBSzVEbzJrUStYNXhLOWNpcFJnRUt3SURBUUFCCi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLQo="}}
  ,{secret, {env, "OAUTH2_SECRET", "data:LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlDV3dJQkFBS0JnUURkbGF0UmpSam9nbzNXb2pnR0hGSFlMdWdkVVdBWTlpUjNmeTRhcldOQTFLb1M4a1Z3MzNjSmliWHI4YnZ3VUFVcGFyQ3dsdmRiSDZkdkVPZm91MC9nQ0ZRc0hVZlFyU0R2K011U1VNQWU4anpLRTRxVytqSyt4UVU5YTAzR1VuS0hra2xlK1EwcFgvZzZqWFo3cjEveEFLNURvMmtRK1g1eEs5Y2lwUmdFS3dJREFRQUJBb0dBRCtvbkF0VnllNGljN1ZSN1Y1MERGOWJPbndSd05YckFSY0RocTlMV05SclJHRWxFU1lZVFE2RWJhdFhTM01DeWpqWDJlTWh1L2FGNVloWEJ3a3Bwd3hnK0VPbVhlaCtNekw3WmgyODRPdVBia2dsQWFHaFY5YmI2LzVDcHVHYjFlc3lQYllXK1R5MlBDMEdTWmZJWGtYczc2alhBdTlUT0J2RDB5YmMyWWxrQ1FRRHl3ZzJSLzd0M1EyT0UyK3lvMzgyQ0xKZHJsU0xWUk9XS3diNHRiMlBqaFk0WEF3VjhkMXZ5MFJlbnhUQitLNU11NTd1VlNUSHRyTUswR0F0RnI4MzNBa0VBNmF2eDIwT0hvNjFZZWxhLzRrNWtRRHRqRWYxTjBMZkkrQmNXWnR4c1MzakRNM2kxSHAwS1N1NXJzQ1BiOGFjSm81Uk8yNmdHVnJmQXNEY0lYS0MrYlFKQVpaMlhJcHNpdEx5UHB1aU1PdkJielBhdmQ0Z1k2WjhLV3JmWXpKb0kvUTlGdUJvNnJLd2w0QkZvVG9EN1dJVVMraHBrYWd3V2l6KzZ6TG9YMWRiT1p3SkFDbUg1ZlNTakFrTFJpNTRQS0o4VEZVZU9QMTVoOXNRenlkSTh6SlUrdXB2REVLWnNaYy9VaFQvU3lTRE94UTRHLzUyM1kwc3ovT1p0U1djb2wvVU1nUUpBTGVzeSsrR2R2b0lETGZKWDVHQlFwdUZnRmVuUmlSRGFieHJFOU1OVVoyYVBGYUZwK0R5QWUrYjRuRHd1SmFXMkxVUmJyOEFFWmdhN29RajB1WXhjWXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="}}

   %%
   %% timer to reload config (keys)
  ,{reload, {env, "OAUTH2_RELOAD", 60000}}

   %%
   %% default list of roles
  ,{claims,  {env, "OAUTH2_CLAIMS", "uid=true"}}
]},

%%
%%
{oauth2, [
   %%
   %% oauth2 server port
   {port, {env, "OAUTH2_PORT", "http://*:8080"}}

   %%
   %% oauth2 backing service to store oauth2 claims
   %%  * export OAUTH2_STORAGE=ddb+http://localhost:8000/oauth2pubkey?hashkey=access
  ,{storage, {env, "OAUTH2_STORAGE", "ephemeral://"}}

   %% enable SignIn/SignUp using key-pair
  ,{keypair, {env, "OAUTH2_KEYPAIR", true}}

   %%
   %% token(s) time-to-live configuration in seconds
  ,{ttl_access_token, {env, "OAUTH2_TTL_ACCESS_TOKEN", 3600}}
  ,{ttl_refresh_token, {env, "OAUTH2_TTL_REFRESH_TOKEN", 86400}}
  ,{ttl_exchange_code, {env, "OAUTH2_TTL_EXCHANGE_CODE", 60}}
]},

%%
%%
{github, [
   %%
   %% GitHub application access credentials
   {access_key, {env, "GITHUB_ACCESS_KEY", "YourAccessKey"}},
   {secret_key, {env, "GITHUB_SECRET_KEY", "YourSecretKey"}},
   {org,        {env, "GITHUB_ORG", "YourGitHubOrg"}},
   {contrib,    {env, "GITHUB_CONTRIB", "YourRepositoriesForExternals"}},
 
   %%
   {scopes,     "user:email read:org repo"},
   {oauth_url,  "https://github.com/login/oauth/authorize"},
   {token_url,  "https://github.com/login/oauth/access_token"},
   {ghapi_url,  "https://api.github.com"}
]}


].