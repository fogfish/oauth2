[

%%
%% logger config
{lager, [
   {handlers, [
      {lager_console_backend, [{level, info}]}
   ]}
]},

%%
%%
{permit, [
   %%
   %% RFC 7519  
   %%   4.1.1.  "iss" (Issuer) Claim
   {issuer, {env, "OAUTH2_ISSUER", "http://localhost:8080"}},

   %%
   %% RFC 7519
   %%   4.1.3.  "aud" (Audience) Claim
   {audience, {env, "OAUTH2_AUDIENCE", "any"}},

   %%
   %% comma separated list of default claim scopes
   {claims,  {env, "OAUTH2_CLAIMS", "uid=true"}}
]},

%%
%%
{oauth2, [
   %%
   %% oauth2 server port
   {port, {env, "OAUTH2_PORT", "http://*:8080"}},
   {tls_certificate, {env, "OAUTH2_TLS_CERTIFICATE", undefined}},
   {tls_private_key, {env, "OAUTH2_TLS_PRIVATE_KEY", undefined}},

   %%
   %% oauth2 backing service to store oauth2 claims
   %%  * export OAUTH2_STORAGE=ddb+http://localhost:8000/oauth2pubkey?hashkey=access
   {storage, {env, "OAUTH2_STORAGE", "ephemeral://"}},

   %% enable SignIn/SignUp using key-pair
   {keypair, {env, "OAUTH2_KEYPAIR", true}},

   %% enable key-pair reset protocol
   {keypair_reset, {env, "OAUTH2_KEYPAIR_RESET", true}},

   %%
   %% configure token(s) time-to-live in seconds
   {ttl_access_token,  {env, "OAUTH2_TTL_ACCESS_TOKEN", 3600}},
   {ttl_refresh_token, {env, "OAUTH2_TTL_REFRESH_TOKEN", 86400}},
   {ttl_exchange_code, {env, "OAUTH2_TTL_EXCHANGE_CODE", 60}},
   {ttl_recovery_code, {env, "OAUTH2_TTL_RECOVERY_CODE", 300}},

   %% email address for consumer communications
   {email, {env, "OAUTH2_EMAIL", "email@example.com"}},
   {signature, {env, "OAUTH2_EMAIL_SIGNATURE", "OAuth2"}}
]},

%%
%%
{github, [
   %%
   %% GitHub application access credentials
   {access_key, {env, "GITHUB_ACCESS_KEY", "YourAccessKey"}},
   {secret_key, {env, "GITHUB_SECRET_KEY", "YourSecretKey"}},
   {org,        {env, "GITHUB_ORG", "YourGitHubOrg"}},
   {contrib,    {env, "GITHUB_CONTRIB", "YourRepositoriesForExternals"}},
 
   %%
   {scopes,     "user:email read:org repo"},
   {oauth_url,  "https://github.com/login/oauth/authorize"},
   {token_url,  "https://github.com/login/oauth/access_token"},
   {ghapi_url,  "https://api.github.com"}
]}


].